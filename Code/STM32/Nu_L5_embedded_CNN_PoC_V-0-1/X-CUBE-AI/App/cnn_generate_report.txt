Neural Network Tools for STM32AI v1.6.0 (STM.ai v7.1.0-RC3)
Created date          : 2022-04-28 15:39:21
Parameters            : generate --name cnn -m C:/Users/j.tschavoll/OneDrive - FH Vorarlberg/Partnerunternehmen FHV/FH/BA/Code/Jupyter/esc50_model_v3/esc50_model_v3_lite.tflite --type tflite --compression 4 --verbosity 1 --workspace C:\Users\JDA1E~1.TSC\AppData\Local\Temp\mxAI_workspace2992758880260012580651024634229117 --output C:\Users\j.tschavoll\.stm32cubemx\cnn_output

Exec/report summary (generate)
------------------------------------------------------------------------------------------------------------------------
model file            : C:\Users\j.tschavoll\OneDrive - FH Vorarlberg\Partnerunternehmen FHV\FH\BA\Code\Jupyter\esc50_model_v3\esc50_model_v3_lite.tflite
type                  : tflite
c_name                : cnn
compression           : 4
workspace dir         : C:\Users\JDA1E~1.TSC\AppData\Local\Temp\mxAI_workspace2992758880260012580651024634229117
output dir            : C:\Users\j.tschavoll\.stm32cubemx\cnn_output
model_name            : esc50_model_v3_lite
model_hash            : fdf7221b74896e9c904b92b488ab16b4
input 1/1             : 'serving_default_conv2d_3_input0'
                        1120 items, 4.38 KiB, ai_float, float, (1,40,28,1), domain:user/
output 1/1            : 'nl_8'
                        6 items, 24 B, ai_float, float, (1,1,1,6), domain:user/
params #              : 142,870 items (558.09 KiB)
macc                  : 9,880,088
weights (ro)          : 406,616 B (397.09 KiB) / -164,864(-28.8%) vs original model (1 segment)
activations (rw)      : 37,248 B (36.38 KiB) (1 segment)
ram (total)           : 41,752 B (40.77 KiB) = 37,248 + 4,480 + 24

Model name - esc50_model_v3_lite ['serving_default_conv2d_3_input0'] ['nl_8']
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type)                              oshape         param/size       macc        connected to                      |   c_size             c_macc             c_type               
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
0    serving_default_conv2d_3_input0 (Input)   (1,40,28,1)                                                                   |                                        
     conv2d_0 (Conv2D)                         (1,40,28,24)   624/2,496        672,024     serving_default_conv2d_3_input0   |                      +26,880(+4.0%)     optimized_conv2d()[0]
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1    pool_1 (Pool)                             (1,20,14,24)                    26,880      conv2d_0                          |                      -26,880(-100.0%)  
     nl_1_nl (Nonlinearity)                    (1,20,14,24)                    6,720       pool_1                            |                                         nl()[1]              
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
2    conv2d_2 (Conv2D)                         (1,20,14,48)   28,848/115,392   8,064,048   nl_1_nl                           |                      +13,440(+0.2%)     optimized_conv2d()[2]
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
3    pool_3 (Pool)                             (1,10,7,48)                     13,440      conv2d_2                          |                      -13,440(-100.0%)  
     nl_3_nl (Nonlinearity)                    (1,10,7,48)                     3,360       pool_3                            |                                         nl()[3]              
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
4    conv2d_4 (Conv2D)                         (1,6,3,48)     57,648/230,592   1,036,848   nl_3_nl                           |                      +864(+0.1%)        conv2d()[4]          
     nl_4_nl (Nonlinearity)                    (1,6,3,48)                      864         conv2d_4                          |                      -864(-100.0%)     
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
5    reshape_5 (Reshape)                       (1,1,1,864)                                 nl_4_nl                           |                                        
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
6    dense_6 (Dense)                           (1,1,1,64)     55,360/221,440   55,360      reshape_5                         |   -164,864(-74.5%)                      dense(c8)[5]         
     nl_6_nl (Nonlinearity)                    (1,1,1,64)                      64          dense_6                           |                                         nl()[6]              
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
7    dense_7 (Dense)                           (1,1,1,6)      390/1,560        390         nl_6_nl                           |                                         dense()[7]           
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
8    nl_8 (Nonlinearity)                       (1,1,1,6)                       90          dense_7                           |                                         nl()/o[8]            
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=9,880,088/9,880,088  weights=571,480/406,616 -164,864(-28.8%) activations=--/37,248 io=--/4,504



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : esc50_model_v3_lite
c-name                : cnn
c-node #              : 9
c-array #             : 22
activations size      : 37248 (1 segments)
weights size          : 406616 (1 segments)
macc                  : 9880088
inputs                : ['serving_default_conv2d_3_input0_output']
outputs               : ['nl_8_output']

C-Arrays (22)
---------------------------------------------------------------------------------------------------------------------------
c_id   name (*_array)                           item/size      domain/mem-pool           c-type        fmt         comment
---------------------------------------------------------------------------------------------------------------------------
0      serving_default_conv2d_3_input0_output   1120/4480      user/                     float         float       /input 
1      conv2d_0_output                          6720/26880     activations/**default**   float         float              
2      nl_1_nl_output                           6720/26880     activations/**default**   float         float              
3      conv2d_2_output                          3360/13440     activations/**default**   float         float              
4      nl_3_nl_output                           3360/13440     activations/**default**   float         float              
5      conv2d_4_output                          864/3456       activations/**default**   float         float              
6      dense_6_output                           64/256         activations/**default**   float         float              
7      nl_6_nl_output                           64/256         activations/**default**   float         float              
8      dense_7_output                           6/24           activations/**default**   float         float              
9      nl_8_output                              6/24           user/                     float         float       /output
10     conv2d_0_weights                         600/2400       weights/                  const float   float              
11     conv2d_0_bias                            24/96          weights/                  const float   float              
12     conv2d_2_weights                         28800/115200   weights/                  const float   float              
13     conv2d_2_bias                            48/192         weights/                  const float   float              
14     conv2d_4_weights                         57600/230400   weights/                  const float   float              
15     conv2d_4_bias                            48/192         weights/                  const float   float              
16     dense_6_weights                          55296/56320    weights/                  const float   c8 (LUT8)          
17     dense_6_bias                             64/256         weights/                  const float   float              
18     dense_7_weights                          384/1536       weights/                  const float   float              
19     dense_7_bias                             6/24           weights/                  const float   float              
20     conv2d_0_scratch0                        1344/5376      activations/**default**   float         float              
21     conv2d_2_scratch0                        1344/5376      activations/**default**   float         float              
---------------------------------------------------------------------------------------------------------------------------

C-Layers (9)
---------------------------------------------------------------------------------------------------------------------------------
c_id   name (*_layer)   id   layer_type         macc      rom      tensors                                     shape (array id) 
---------------------------------------------------------------------------------------------------------------------------------
0      conv2d_0         1    optimized_conv2d   698904    2496     I: serving_default_conv2d_3_input0_output   (1,40,28,1) (0)  
                                                                   S: conv2d_0_scratch0                                         
                                                                   W: conv2d_0_weights                         (1,24,5,5) (10)  
                                                                   W: conv2d_0_bias                            (1,1,1,24) (11)  
                                                                   O: conv2d_0_output                          (1,20,14,24) (1) 
---------------------------------------------------------------------------------------------------------------------------------
1      nl_1_nl          1    nl                 6720      0        I: conv2d_0_output                          (1,20,14,24) (1) 
                                                                   O: nl_1_nl_output                           (1,20,14,24) (2) 
---------------------------------------------------------------------------------------------------------------------------------
2      conv2d_2         3    optimized_conv2d   8077488   115392   I: nl_1_nl_output                           (1,20,14,24) (2) 
                                                                   S: conv2d_2_scratch0                                         
                                                                   W: conv2d_2_weights                         (24,48,5,5) (12) 
                                                                   W: conv2d_2_bias                            (1,1,1,48) (13)  
                                                                   O: conv2d_2_output                          (1,10,7,48) (3)  
---------------------------------------------------------------------------------------------------------------------------------
3      nl_3_nl          3    nl                 3360      0        I: conv2d_2_output                          (1,10,7,48) (3)  
                                                                   O: nl_3_nl_output                           (1,10,7,48) (4)  
---------------------------------------------------------------------------------------------------------------------------------
4      conv2d_4         4    conv2d             1037712   230592   I: nl_3_nl_output                           (1,10,7,48) (4)  
                                                                   W: conv2d_4_weights                         (48,48,5,5) (14) 
                                                                   W: conv2d_4_bias                            (1,1,1,48) (15)  
                                                                   O: conv2d_4_output                          (1,6,3,48) (5)   
---------------------------------------------------------------------------------------------------------------------------------
5      dense_6          6    dense              55360     56576    I: conv2d_4_output0                         (1,1,1,864) (5)  
                                                                   W: dense_6_weights                          (864,1,1,64) (16)
                                                                   W: dense_6_bias                             (1,1,1,64) (17)  
                                                                   O: dense_6_output                           (1,1,1,64) (6)   
---------------------------------------------------------------------------------------------------------------------------------
6      nl_6_nl          6    nl                 64        0        I: dense_6_output                           (1,1,1,64) (6)   
                                                                   O: nl_6_nl_output                           (1,1,1,64) (7)   
---------------------------------------------------------------------------------------------------------------------------------
7      dense_7          7    dense              390       1560     I: nl_6_nl_output                           (1,1,1,64) (7)   
                                                                   W: dense_7_weights                          (64,1,1,6) (18)  
                                                                   W: dense_7_bias                             (1,1,1,6) (19)   
                                                                   O: dense_7_output                           (1,1,1,6) (8)    
---------------------------------------------------------------------------------------------------------------------------------
8      nl_8             8    nl                 90        0        I: dense_7_output                           (1,1,1,6) (8)    
                                                                   O: nl_8_output                              (1,1,1,6) (9)    
---------------------------------------------------------------------------------------------------------------------------------



Complexity report per layer - macc=9,880,088 weights=406,616 act=37,248 ram_io=4,504
-------------------------------------------------------------------------
id   name       c_macc                    c_rom                     c_id
-------------------------------------------------------------------------
0    conv2d_0   ||                 7.1%   |                  0.6%   [0] 
1    nl_1_nl    |                  0.1%   |                  0.0%   [1] 
2    conv2d_2   ||||||||||||||||  81.8%   ||||||||          28.4%   [2] 
3    nl_3_nl    |                  0.0%   |                  0.0%   [3] 
4    conv2d_4   ||                10.5%   ||||||||||||||||  56.7%   [4] 
6    dense_6    |                  0.6%   ||||              13.9%   [5] 
6    nl_6_nl    |                  0.0%   |                  0.0%   [6] 
7    dense_7    |                  0.0%   |                  0.4%   [7] 
8    nl_8       |                  0.0%   |                  0.0%   [8] 

Generated files (5)
-------------------------------------------------------------------
C:\Users\j.tschavoll\.stm32cubemx\cnn_output\cnn_config.h
C:\Users\j.tschavoll\.stm32cubemx\cnn_output\cnn.h
C:\Users\j.tschavoll\.stm32cubemx\cnn_output\cnn.c
C:\Users\j.tschavoll\.stm32cubemx\cnn_output\cnn_data.h
C:\Users\j.tschavoll\.stm32cubemx\cnn_output\cnn_data.c
