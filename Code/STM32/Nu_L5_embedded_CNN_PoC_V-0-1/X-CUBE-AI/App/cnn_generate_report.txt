Neural Network Tools for STM32AI v1.6.0 (STM.ai v7.1.0-RC3)
Created date          : 2022-04-07 16:47:00
Parameters            : generate --name cnn -m C:/Users/j.tschavoll/OneDrive - FH Vorarlberg/Partnerunternehmen FHV/FH/BA/Code/Jupyter/sine_model/sine_model_lite.tflite --type tflite --compression 4 --verbosity 1 --workspace C:\Users\JDA1E~1.TSC\AppData\Local\Temp\mxAI_workspace320904447361008167065424350897787 --output C:\Users\j.tschavoll\.stm32cubemx\cnn_output

Exec/report summary (generate)
------------------------------------------------------------------------------------------------------------------------
model file            : C:\Users\j.tschavoll\OneDrive - FH Vorarlberg\Partnerunternehmen FHV\FH\BA\Code\Jupyter\sine_model\sine_model_lite.tflite
type                  : tflite
c_name                : cnn
compression           : 4
workspace dir         : C:\Users\JDA1E~1.TSC\AppData\Local\Temp\mxAI_workspace320904447361008167065424350897787
output dir            : C:\Users\j.tschavoll\.stm32cubemx\cnn_output
model_name            : sine_model_lite
model_hash            : 1da464ab39635f8373776220121b3498
input 1/1             : 'serving_default_conv2d_12_input0'
                        1120 items, 4.38 KiB, ai_float, float, (1,40,28,1), domain:user/
output 1/1            : 'nl_8'
                        4 items, 16 B, ai_float, float, (1,1,1,4), domain:user/
params #              : 154,644 items (604.08 KiB)
macc                  : 4,150,168
weights (ro)          : 250,960 B (245.08 KiB) / -367,616(-59.4%) vs original model (1 segment)
activations (rw)      : 35,520 B (34.69 KiB) (1 segment)
ram (total)           : 40,016 B (39.08 KiB) = 35,520 + 4,480 + 16

Model name - sine_model_lite ['serving_default_conv2d_12_input0'] ['nl_8']
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
id   layer (type)                               oshape         param/size        macc        connected to                       |   c_size             c_macc             c_type               
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
0    serving_default_conv2d_12_input0 (Input)   (1,40,28,1)                                                                     |                                        
     conv2d_0 (Conv2D)                          (1,40,28,24)   240/960           241,944     serving_default_conv2d_12_input0   |                      +26,880(+11.1%)    optimized_conv2d()[0]
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
1    pool_1 (Pool)                              (1,20,14,24)                     26,880      conv2d_0                           |                      -26,880(-100.0%)  
     nl_1_nl (Nonlinearity)                     (1,20,14,24)                     6,720       pool_1                             |                                         nl()[1]              
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
2    conv2d_2 (Conv2D)                          (1,20,14,48)   10,416/41,664     2,903,088   nl_1_nl                            |                      +13,440(+0.5%)     optimized_conv2d()[2]
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
3    pool_3 (Pool)                              (1,10,7,48)                      13,440      conv2d_2                           |                      -13,440(-100.0%)  
     nl_3_nl (Nonlinearity)                     (1,10,7,48)                      3,360       pool_3                             |                                         nl()[3]              
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
4    conv2d_4 (Conv2D)                          (1,8,5,48)     20,784/83,136     829,488     nl_3_nl                            |                      +1,920(+0.2%)      conv2d()[4]          
     nl_4_nl (Nonlinearity)                     (1,8,5,48)                       1,920       conv2d_4                           |                      -1,920(-100.0%)   
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
5    reshape_5 (Reshape)                        (1,1,1,1920)                                 nl_4_nl                            |                                        
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
6    dense_6 (Dense)                            (1,1,1,64)     122,944/491,776   122,944     reshape_5                          |   -367,616(-74.8%)                      dense(c8)[5]         
     nl_6_nl (Nonlinearity)                     (1,1,1,64)                       64          dense_6                            |                                         nl()[6]              
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
7    dense_7 (Dense)                            (1,1,1,4)      260/1,040         260         nl_6_nl                            |                                         dense()[7]           
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
8    nl_8 (Nonlinearity)                        (1,1,1,4)                        60          dense_7                            |                                         nl()/o[8]            
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
model/c-model: macc=4,150,168/4,150,168  weights=618,576/250,960 -367,616(-59.4%) activations=--/35,520 io=--/4,496



Generated C-graph summary
------------------------------------------------------------------------------------------------------------------------
model name            : sine_model_lite
c-name                : cnn
c-node #              : 9
c-array #             : 22
activations size      : 35520 (1 segments)
weights size          : 250960 (1 segments)
macc                  : 4150168
inputs                : ['serving_default_conv2d_12_input0_output']
outputs               : ['nl_8_output']

C-Arrays (22)
-----------------------------------------------------------------------------------------------------------------------------
c_id   name (*_array)                            item/size       domain/mem-pool           c-type        fmt         comment
-----------------------------------------------------------------------------------------------------------------------------
0      serving_default_conv2d_12_input0_output   1120/4480       user/                     float         float       /input 
1      conv2d_0_output                           6720/26880      activations/**default**   float         float              
2      nl_1_nl_output                            6720/26880      activations/**default**   float         float              
3      conv2d_2_output                           3360/13440      activations/**default**   float         float              
4      nl_3_nl_output                            3360/13440      activations/**default**   float         float              
5      conv2d_4_output                           1920/7680       activations/**default**   float         float              
6      dense_6_output                            64/256          activations/**default**   float         float              
7      nl_6_nl_output                            64/256          activations/**default**   float         float              
8      dense_7_output                            4/16            activations/**default**   float         float              
9      nl_8_output                               4/16            user/                     float         float       /output
10     conv2d_0_weights                          216/864         weights/                  const float   float              
11     conv2d_0_bias                             24/96           weights/                  const float   float              
12     conv2d_2_weights                          10368/41472     weights/                  const float   float              
13     conv2d_2_bias                             48/192          weights/                  const float   float              
14     conv2d_4_weights                          20736/82944     weights/                  const float   float              
15     conv2d_4_bias                             48/192          weights/                  const float   float              
16     dense_6_weights                           122880/123904   weights/                  const float   c8 (LUT8)          
17     dense_6_bias                              64/256          weights/                  const float   float              
18     dense_7_weights                           256/1024        weights/                  const float   float              
19     dense_7_bias                              4/16            weights/                  const float   float              
20     conv2d_0_scratch0                         1344/5376       activations/**default**   float         float              
21     conv2d_2_scratch0                         1344/5376       activations/**default**   float         float              
-----------------------------------------------------------------------------------------------------------------------------

C-Layers (9)
-----------------------------------------------------------------------------------------------------------------------------------
c_id   name (*_layer)   id   layer_type         macc      rom      tensors                                      shape (array id)  
-----------------------------------------------------------------------------------------------------------------------------------
0      conv2d_0         1    optimized_conv2d   268824    960      I: serving_default_conv2d_12_input0_output   (1,40,28,1) (0)   
                                                                   S: conv2d_0_scratch0                                           
                                                                   W: conv2d_0_weights                          (1,24,3,3) (10)   
                                                                   W: conv2d_0_bias                             (1,1,1,24) (11)   
                                                                   O: conv2d_0_output                           (1,20,14,24) (1)  
-----------------------------------------------------------------------------------------------------------------------------------
1      nl_1_nl          1    nl                 6720      0        I: conv2d_0_output                           (1,20,14,24) (1)  
                                                                   O: nl_1_nl_output                            (1,20,14,24) (2)  
-----------------------------------------------------------------------------------------------------------------------------------
2      conv2d_2         3    optimized_conv2d   2916528   41664    I: nl_1_nl_output                            (1,20,14,24) (2)  
                                                                   S: conv2d_2_scratch0                                           
                                                                   W: conv2d_2_weights                          (24,48,3,3) (12)  
                                                                   W: conv2d_2_bias                             (1,1,1,48) (13)   
                                                                   O: conv2d_2_output                           (1,10,7,48) (3)   
-----------------------------------------------------------------------------------------------------------------------------------
3      nl_3_nl          3    nl                 3360      0        I: conv2d_2_output                           (1,10,7,48) (3)   
                                                                   O: nl_3_nl_output                            (1,10,7,48) (4)   
-----------------------------------------------------------------------------------------------------------------------------------
4      conv2d_4         4    conv2d             831408    83136    I: nl_3_nl_output                            (1,10,7,48) (4)   
                                                                   W: conv2d_4_weights                          (48,48,3,3) (14)  
                                                                   W: conv2d_4_bias                             (1,1,1,48) (15)   
                                                                   O: conv2d_4_output                           (1,8,5,48) (5)    
-----------------------------------------------------------------------------------------------------------------------------------
5      dense_6          6    dense              122944    124160   I: conv2d_4_output0                          (1,1,1,1920) (5)  
                                                                   W: dense_6_weights                           (1920,1,1,64) (16)
                                                                   W: dense_6_bias                              (1,1,1,64) (17)   
                                                                   O: dense_6_output                            (1,1,1,64) (6)    
-----------------------------------------------------------------------------------------------------------------------------------
6      nl_6_nl          6    nl                 64        0        I: dense_6_output                            (1,1,1,64) (6)    
                                                                   O: nl_6_nl_output                            (1,1,1,64) (7)    
-----------------------------------------------------------------------------------------------------------------------------------
7      dense_7          7    dense              260       1040     I: nl_6_nl_output                            (1,1,1,64) (7)    
                                                                   W: dense_7_weights                           (64,1,1,4) (18)   
                                                                   W: dense_7_bias                              (1,1,1,4) (19)    
                                                                   O: dense_7_output                            (1,1,1,4) (8)     
-----------------------------------------------------------------------------------------------------------------------------------
8      nl_8             8    nl                 60        0        I: dense_7_output                            (1,1,1,4) (8)     
                                                                   O: nl_8_output                               (1,1,1,4) (9)     
-----------------------------------------------------------------------------------------------------------------------------------



Complexity report per layer - macc=4,150,168 weights=250,960 act=35,520 ram_io=4,496
-------------------------------------------------------------------------
id   name       c_macc                    c_rom                     c_id
-------------------------------------------------------------------------
0    conv2d_0   ||                 6.5%   |                  0.4%   [0] 
1    nl_1_nl    |                  0.2%   |                  0.0%   [1] 
2    conv2d_2   ||||||||||||||||  70.3%   ||||||            16.6%   [2] 
3    nl_3_nl    |                  0.1%   |                  0.0%   [3] 
4    conv2d_4   |||||             20.0%   |||||||||||       33.1%   [4] 
6    dense_6    |                  3.0%   ||||||||||||||||  49.5%   [5] 
6    nl_6_nl    |                  0.0%   |                  0.0%   [6] 
7    dense_7    |                  0.0%   |                  0.4%   [7] 
8    nl_8       |                  0.0%   |                  0.0%   [8] 

Generated files (5)
-------------------------------------------------------------------
C:\Users\j.tschavoll\.stm32cubemx\cnn_output\cnn_config.h
C:\Users\j.tschavoll\.stm32cubemx\cnn_output\cnn.h
C:\Users\j.tschavoll\.stm32cubemx\cnn_output\cnn.c
C:\Users\j.tschavoll\.stm32cubemx\cnn_output\cnn_data.h
C:\Users\j.tschavoll\.stm32cubemx\cnn_output\cnn_data.c
